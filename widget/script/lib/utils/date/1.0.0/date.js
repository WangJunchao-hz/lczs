!function(e){function t(){this._initParams()}t.prototype._initParams=function(){this.now=new Date},t.prototype.format=function(e,t){function a(e,t){try{var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?"上午"+e.getHours():"下午"+e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},o={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+o[e.getDay()+""])),/(q+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1&&RegExp.$1.length>2&&RegExp.$1.length>3?"第":"")+a["q+"]+(RegExp.$1.length>1?RegExp.$1.length>2?(RegExp.$1.length,"季度"):"季":"")));for(var n in a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:a[n].length>1?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}catch(e){console.log(e)}}var o,n=this;switch(arguments.length){case 0:o=a(n.now,"yyyy-MM-dd");break;case 1:o=/(y+)|(M+)|(d+)|(h+)|(H+)|(m+)|(s+)|(S+)|(E+)|(q+)/.test(arguments[0])&&!/GMT/.test(arguments[0])?a(n.now,arguments[0]):a(new Date(n._getCorrectDate(arguments[0])),"yyyy-MM-dd");break;case 2:o=a(new Date(n._getCorrectDate(arguments[0])),arguments[1])}return o},t.prototype.span=function(e,t,a){function o(e,t,a){var o,n,s,g,i,c,l,d=t.getTime(),p=e.getTime()-d;if("year"===a||"day"===a)if((c=Math.round(Math.abs(p)/1e3))>=60)if((i=Math.round(c/60))>=60)if((g=Math.round(i/60))>24)switch(a){case"year":l=(s=Math.round(g/24))>30?(n=Math.round(s/30))>12?(o=Math.round(n/12))+"年":n+"月":s+"天";break;case"day":l=r.format(t)}else l=g+"时";else l=i+"分";else l=c+"秒";else switch(c=(Math.abs(p)/1e3).toFixed(4),i=(c/60).toFixed(4),g=(i/60).toFixed(4),s=(g/24).toFixed(4),n=(s/30).toFixed(4),o=(n/12).toFixed(4),a){case"y":l=o;break;case"M":l=n;break;case"d":l=s;break;case"H":l=g;break;case"m":l=i;break;case"s":l=c;break;default:l=p}return l}var n,r=this;switch(arguments.length){case 1:"year"===arguments[0]||"day"===arguments[0]?console.log("请输入时间!"):(s=new Date(r._getCorrectDate(arguments[0]))).getTime()==r.now.getTime()?console.log("不能输入当前时间!"):n=o(r.now,s,"year");break;case 2:if("year"===arguments[0]||"day"===arguments[0])console.log("请输入正确的参数!");else if("year"===arguments[1]||"day"===arguments[1]){var s=new Date(r._getCorrectDate(arguments[0]));s.getTime()==r.now.getTime()?console.log("不能输入当前时间!"):n=o(r.now,s,arguments[1])}else n=o(g=new Date(r._getCorrectDate(arguments[0])),i=new Date(r._getCorrectDate(arguments[1])),"S");break;case 3:var g=new Date(r._getCorrectDate(arguments[0])),i=new Date(r._getCorrectDate(arguments[1]));n=o(g,i,arguments[2]);break;default:console.log("请输入正确的参数!")}return n},t.prototype.periods=function(){var e,t=this,a=t.now.getHours(),o=t.now.getMinutes(),n=parseFloat(a+"."+o);return n>3&&n<=6?e="凌晨":n>6&&n<=8?e="早晨":n>8&&n<=11?e="上午":n>11&&n<=13?e="中午":n>13&&n<=17?e="下午":n>17&&n<=19?e="傍晚":n>19&&n<24?e="晚上":n>=0&&n<=3&&(e="深夜"),e},t.prototype._getCorrectDate=function(e){var t=e;return"string"==typeof t&&-1!=t.indexOf("-")&&(t=e.replace(/-/g,"/")),t},"undefined"!=typeof module&&"object"==typeof exports?module.exports=new t:"function"==typeof define&&(define.amd||define.cmd)?define(new t):e.DatePro=new t}("undefined"!=typeof window?window:global);